"use strict";(self["webpackChunkweb001"]=self["webpackChunkweb001"]||[]).push([[535],{68687:function(e,r,t){t.r(r),t.d(r,{default:function(){return w}});var n,o=function(){var e=this,r=e._self._c,t=e._self._setupProxy;return r("div",{staticClass:"position-login"},[t.isShowLogin?r("div",{staticClass:"position-login-bg"},[r("div",{staticClass:"position-login-bg-box"},[r("div",{staticClass:"position-login-bg-box-left"}),r("div",{staticClass:"position-login-bg-box-right"},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loginLoading,expression:"loginLoading"}],staticClass:"position-login-bg-box-right-form"},[t.showYzmImage?e._e():r("FormWrapper",{ref:"loginRef",attrs:{model:t.loginForm,rules:t.formRules,wrap:"",labelWidth:"0px",bgc:!1}},[r("FormItemWrapper",{attrs:{span:24,prop:"userName"}},[r("JtInput",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入用户名"},model:{value:t.loginForm.userName,callback:function(r){e.$set(t.loginForm,"userName",r)},expression:"loginForm.userName"}})],1),r("FormItemWrapper",{attrs:{span:24,prop:"passWord"}},[r("JtInput",{attrs:{"prefix-icon":"el-icon-unlock",type:"password",placeholder:"请输入密码","show-password":""},model:{value:t.loginForm.passWord,callback:function(r){e.$set(t.loginForm,"passWord",r)},expression:"loginForm.passWord"}})],1),r("FormItemWrapper",{attrs:{span:24}},[r(t.JtButton,{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.loginAction}},[e._v("登录")])],1)],1)],1)])])]):e._e()])},a=[],i=t(20144),s=t(78918),l=()=>{var e=(0,i.getCurrentInstance)();if(e)return e.proxy.$router},u=()=>{var e=(0,i.getCurrentInstance)();if(e){var r=l();return n||(n=(0,i.reactive)((0,s.Z)({},e.proxy.$route)),r.afterEach((e=>Object.assign(n,e)))),n}},c=t(39954),p=t(75792),f=t(80543),d=(t(57658),t(76182)),g=t(49998),m={__name:"login",setup(e){var r,t=(0,d.L)(),n=l(),o=u(),a="/layout/home",m=(0,i.reactive)({userName:"",passWord:"",validCode:"",deviceId:Math.random().toString(16).slice(-12),grant_type:"password_code"}),v=(0,i.ref)(!0),h=(0,i.ref)(""),b=()=>{var e,r,i,l;return(0,f.Z)().async((function(u){while(1)switch(u.prev=u.next){case 0:return u.next=2,(0,f.Z)().awrap(h.value.validate().catch((()=>{})));case 2:if(e=u.sent,e){u.next=5;break}return u.abrupt("return",!1);case 5:return r=o.query.state,x.value=!1,i=(0,s.Z)({},m),v.value=!0,u.next=11,(0,f.Z)().awrap(t.login(i));case 11:if(l=u.sent,v.value=!1,!l){u.next=16;break}return n.push(r||a),u.abrupt("return");case 16:t.removeUserinfo();case 17:case"end":return u.stop()}}),null,null,null,Promise)},w=(0,i.reactive)({userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],passWord:[{required:!0,message:"请输入密码",trigger:"blur"}]}),y=null===(r=t.tokenInfo)||void 0===r?void 0:r.access_token,x=(0,i.ref)(!1);(0,i.watch)((()=>m.validCode),(e=>{4===e.length&&b()}));var k=(0,c.e)(!0),C=(0,p.Z)(k,2),I=C[0],_=C[1],F=()=>{var e,r,i,s,l,u,c;return(0,f.Z)().async((function(p){while(1)switch(p.prev=p.next){case 0:if(v.value=!0,_(!1),e=o.query,r=e.code,i=e.state,!r){p.next=16;break}return s=window.location.protocol,l=window.location.host,u=s+"//"+l+"/",p.next=9,(0,f.Z)().awrap(t.ssoLogin(r,u));case 9:if(c=p.sent,!c){p.next=13;break}return n.push(i||a),p.abrupt("return");case 13:t.removeUserinfo(),p.next=17;break;case 16:y&&n.push(i||a);case 17:v.value=!1,setTimeout((()=>_(!0)),200);case 19:case"end":return p.stop()}}),null,null,null,Promise)};return(0,i.nextTick)(F),{__sfc:!0,userStore:t,router:n,route:o,redirect:a,loginForm:m,loginLoading:v,loginRef:h,loginAction:b,formRules:w,token:y,showYzmImage:x,isShowLogin:I,setShowLogin:_,getTokenByCode:F,JtButton:g.Z}}},v=m,h=t(1001),b=(0,h.Z)(v,o,a,!1,null,"22931149",null),w=b.exports},39954:function(e,r,t){t.d(r,{e:function(){return o}});var n=t(20144),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=(0,n.ref)(e),t=e=>{r.value=e};return[r,t]}},75792:function(e,r,t){function n(e){if(Array.isArray(e))return e}t.d(r,{Z:function(){return l}});t(41817),t(33948),t(57658);function o(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a,i,s=[],l=!0,u=!1;try{if(a=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=a.call(t)).done)&&(s.push(n.value),s.length!==r);l=!0);}catch(c){u=!0,o=c}finally{try{if(!l&&null!=t["return"]&&(i=t["return"](),Object(i)!==i))return}finally{if(u)throw o}}return s}}t(91038),t(74916);function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function i(e,r){if(e){if("string"===typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,r):void 0}}t(21703);function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,r){return n(e)||o(e,r)||i(e,r)||s()}}}]);